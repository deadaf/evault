<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>eVault - a blockchain-based storage system for legal records</title>
	</head>
	<body>
		<button id="loginBtn" onclick="toggleMetaMaskConnection()">Toggle MetaMask Connection</button>
		<button id="logoutBtn" onclick="disconnectFromMetaMask()" style="display: none">Logout from MetaMask</button>
		<div id="walletBalance" style="display: none"></div>
		<script>
			let isMetaMaskConnected = false;

			async function toggleMetaMaskConnection() {
				if (isMetaMaskConnected) {
					await disconnectFromMetaMask();
				} else {
					await connectToMetaMask();
				}
			}

			async function connectToMetaMask() {
				// Check if MetaMask is installed
				if (typeof window.ethereum !== "undefined") {
					console.log("MetaMask is installed!");
					try {
						// Request account access
						const accounts = await window.ethereum.request({ method: "eth_requestAccounts" });
						const account = accounts[0];
						const balance = await window.ethereum.request({ method: "eth_getBalance", params: [account] });
						document.getElementById("loginBtn").style.display = "none";
						document.getElementById("logoutBtn").style.display = "block";
						document.getElementById("walletBalance").style.display = "block";
						document.getElementById("walletBalance").innerHTML = `Wallet Balance: ${balance} ETH`;
						isMetaMaskConnected = true;
					} catch (error) {
						console.error(error);
					}
				} else {
					alert("Please install MetaMask extension in your browser.");
				}
			}

			async function disconnectFromMetaMask() {
				// Reset UI elements
				document.getElementById("loginBtn").style.display = "block";
				document.getElementById("logoutBtn").style.display = "none";
				document.getElementById("walletBalance").style.display = "none";
				document.getElementById("walletBalance").innerHTML = "";
				isMetaMaskConnected = false;
			}
		</script>
	</body>
</html>
